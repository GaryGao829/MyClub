	<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert Parents Request Details</title>
<script type="text/javascript">
	
	var MEDIA_TYPE_URLENCODED = "application/x-www-form-urlencoded";
	var MEDIA_TYPE_JSON = "application/json";
	var MEDIA_TYPE_XML = "application/xml";
	
	function buildUrlEncodedBody(attributes) {
		var body = "";
		var i = 0;
		while (i < attributes.length) {
			if (attributes[i] != "" && attributes[i+1] != "") {
				if (body.length > 0) {
					body = body + "&";
				}
				body = body + escape(attributes[i]) + "=" + escape(attributes[i+1]);
			}
			i = i + 2;
		}
		return body;
	}

	function prepResponseBodyForDisplay(responseBody, accept) {
		var html = "<pre style='margin-top:0'>";
		for (i = 0; i < responseBody.length; i++) {
			character = responseBody.charAt(i);
			if (character == "\t") {
				html = html + "&nbsp;&nbsp;&nbsp;";
			} else {
				if (accept == MEDIA_TYPE_XML) {
					if (character == "<") {
						html = html + "&lt;";
					} else if (character == ">") {
						html = html + "&gt;";
					} else {
						html = html + character;
					}
				} else {   // contentType == MEDIA_TYPE_JSON
					if (character == "\t") {
						html = html + "&nbsp;&nbsp;&nbsp;";
					} else {
						html = html + character;
					}
				}
			}
		}
		return html + "</pre>";
	}
	
	function doCreate(method, requestBody, contentType) {
		
		var url = "/restsql" + "/res/" + "Activity";
		var responseBody = "";
		var xmlhttp;

		if (navigator.appName == "Microsoft Internet Explorer") {
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		} else {
			xmlhttp = new XMLHttpRequest();
		}
		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4) {
				if (xmlhttp.status == 200) {
					responseBody = prepResponseBodyForDisplay(xmlhttp.responseText, accept);
				}else{
					responseBody = "<code>" + xmlhttp.responseText + "</code>";
					
				}
				window.location = "index.html";
			}
		}

		xmlhttp.open(method, url, true);
		xmlhttp.setRequestHeader("Accept", MEDIA_TYPE_JSON);
		if (contentType != null) {
			xmlhttp.setRequestHeader("Content-Type", contentType);
		}
		xmlhttp.send(requestBody);
		alert("create successfully");
	}

	//Create activity
	function CreateActivity() {
		
		var body = "";
		var contentType = "";
		var attributes = ["activity_name",
							document.requestForm.activity_name.value,
							"activity_owner",
							document.requestForm.activity_owner.value,
							"start_time",
							document.requestForm.start_time.value,
							"end_time",
							document.requestForm.end_time.value,
							"location",
							document.requestForm.location.value,
							"description",
							document.requestForm.description.value,
							"type",
							document.requestForm.type.value,
							"isPublished",
							document.requestForm.isPublished.value];
		body = buildUrlEncodedBody(attributes);
		if (body == "") {
			alert("At least one name/value required");
			return;
		}
		contentType = MEDIA_TYPE_URLENCODED;
		
		doCreate("POST", body, contentType);
	}
</script>
</head>
<body style="font-family:sans-serif">
<span style='font-weight:bold'>Request Details</span><br/>
<form name="requestForm" onsubmit="CreateActivity(); return false">
	<table border="0">
		<tr id="trUE" bgcolor="#EFEFEF">
		</tr>
		<tr id="trUERow">
			<td>
				Activity Name: <input type="text" name="activity_name" size="8" />
			</td>
			<td>
				Activity Owner: <input type="text" name="activity_owner" size="8" />
			</td>
			<td>
				Start Time: <input type="text" name="start_time" size="8" />
			</td>
			<td>
				End Time: <input type="text" name="end_time" size="8" />
			</td>
			<td>
				Location: <input type="text" name="location" size="8" />
			</td>
			<td>
				description: <input type="text" name="description" size="8" />
			</td>
			<td>
				type: <input type="text" name="type" size="8" />
			</td>
			<td>
				isPublished: <input type="text" name="isPublished" size="8" />
			</td>
		</tr>
	</table>
	<p>
		&nbsp; <input type="button" name="submitJson" value="Create Activity" onclick="CreateActivity()" />
	</p>
</form>
</body>
</html>